<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Dulcimer: bootloader/main.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.4 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
  </ul>
</div>
<h1>bootloader/main.c File Reference</h1><code>#include &lt;avr/io.h&gt;</code><br>
<code>#include &lt;avr/interrupt.h&gt;</code><br>
<code>#include &lt;avr/pgmspace.h&gt;</code><br>
<code>#include &lt;avr/wdt.h&gt;</code><br>
<code>#include &lt;avr/boot.h&gt;</code><br>
<code>#include &lt;avr/eeprom.h&gt;</code><br>
<code>#include &lt;util/delay.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &quot;<a class="el" href="bootloaderconfig_8h-source.html">bootloaderconfig.h</a>&quot;</code><br>
<code>#include &quot;usbdrv/usbdrv.c&quot;</code><br>

<p>
<a href="bootloader_2main_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloader_2main_8c.html#8e47511199ebc63410d721287997f567">USBASP_FUNC_CONNECT</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloader_2main_8c.html#74fe4e07cf469aec7ba57af97b430252">USBASP_FUNC_DISCONNECT</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloader_2main_8c.html#e52e7b7fa5d58ba171059105d230698a">USBASP_FUNC_TRANSMIT</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloader_2main_8c.html#1a9091cb2d34e92cb27b9026986d4dfa">USBASP_FUNC_READFLASH</a>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloader_2main_8c.html#401748be208bab6bf7e0512b164d849d">USBASP_FUNC_ENABLEPROG</a>&nbsp;&nbsp;&nbsp;5</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloader_2main_8c.html#5e08b9de457984aeb83030e7e4da6136">USBASP_FUNC_WRITEFLASH</a>&nbsp;&nbsp;&nbsp;6</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloader_2main_8c.html#65718806da24e91750b66ee9c94cb2d4">USBASP_FUNC_READEEPROM</a>&nbsp;&nbsp;&nbsp;7</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloader_2main_8c.html#a9257c2f3bbe65e31e0aba2c163e30bf">USBASP_FUNC_WRITEEEPROM</a>&nbsp;&nbsp;&nbsp;8</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloader_2main_8c.html#d9bf3472dffe9258ef1ff1c35cafc687">USBASP_FUNC_SETLONGADDRESS</a>&nbsp;&nbsp;&nbsp;9</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloader_2main_8c.html#6fcafe7f84d4c52e75984340b07e714e">ulong</a>&nbsp;&nbsp;&nbsp;unsigned long</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloader_2main_8c.html#d46b2ebcd4c426b06cda147ddc1001e7">uint</a>&nbsp;&nbsp;&nbsp;unsigned int</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloader_2main_8c.html#3e35f0f5ebfa96f116683e03fdd2d28e">GICR</a>&nbsp;&nbsp;&nbsp;MCUCR</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloader_2main_8c.html#f4d5c2072dea3b7d4226f14185ad40cb">CURRENT_ADDRESS</a>&nbsp;&nbsp;&nbsp;currentAddress.w[0]</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uchar&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloader_2main_8c.html#e6f351eca7bf6fb1251f9a478cbae2b0">usbFunctionSetup</a> (uchar data[8])</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">uchar&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloader_2main_8c.html#92f69288e90801df366cde5a838a818f">usbFunctionWrite</a> (uchar *data, uchar len)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">uchar&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloader_2main_8c.html#60cb66d7dc4c292a004b2b4e796a7e0b">usbFunctionRead</a> (uchar *data, uchar len)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloader_2main_8c.html#840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloader_2main_8c.html#3f99531a912706b57d64ce5f10bd12da">longConverter_t</a></td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="f4d5c2072dea3b7d4226f14185ad40cb"></a><!-- doxytag: member="main.c::CURRENT_ADDRESS" ref="f4d5c2072dea3b7d4226f14185ad40cb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CURRENT_ADDRESS&nbsp;&nbsp;&nbsp;currentAddress.w[0]          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="bootloader_2main_8c-source.html#l00106">106</a> of file <a class="el" href="bootloader_2main_8c-source.html">main.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="3e35f0f5ebfa96f116683e03fdd2d28e"></a><!-- doxytag: member="main.c::GICR" ref="3e35f0f5ebfa96f116683e03fdd2d28e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GICR&nbsp;&nbsp;&nbsp;MCUCR          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="d46b2ebcd4c426b06cda147ddc1001e7"></a><!-- doxytag: member="main.c::uint" ref="d46b2ebcd4c426b06cda147ddc1001e7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define uint&nbsp;&nbsp;&nbsp;unsigned int          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="6fcafe7f84d4c52e75984340b07e714e"></a><!-- doxytag: member="main.c::ulong" ref="6fcafe7f84d4c52e75984340b07e714e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ulong&nbsp;&nbsp;&nbsp;unsigned long          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="8e47511199ebc63410d721287997f567"></a><!-- doxytag: member="main.c::USBASP_FUNC_CONNECT" ref="8e47511199ebc63410d721287997f567" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USBASP_FUNC_CONNECT&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="74fe4e07cf469aec7ba57af97b430252"></a><!-- doxytag: member="main.c::USBASP_FUNC_DISCONNECT" ref="74fe4e07cf469aec7ba57af97b430252" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USBASP_FUNC_DISCONNECT&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="401748be208bab6bf7e0512b164d849d"></a><!-- doxytag: member="main.c::USBASP_FUNC_ENABLEPROG" ref="401748be208bab6bf7e0512b164d849d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USBASP_FUNC_ENABLEPROG&nbsp;&nbsp;&nbsp;5          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="65718806da24e91750b66ee9c94cb2d4"></a><!-- doxytag: member="main.c::USBASP_FUNC_READEEPROM" ref="65718806da24e91750b66ee9c94cb2d4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USBASP_FUNC_READEEPROM&nbsp;&nbsp;&nbsp;7          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="1a9091cb2d34e92cb27b9026986d4dfa"></a><!-- doxytag: member="main.c::USBASP_FUNC_READFLASH" ref="1a9091cb2d34e92cb27b9026986d4dfa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USBASP_FUNC_READFLASH&nbsp;&nbsp;&nbsp;4          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="d9bf3472dffe9258ef1ff1c35cafc687"></a><!-- doxytag: member="main.c::USBASP_FUNC_SETLONGADDRESS" ref="d9bf3472dffe9258ef1ff1c35cafc687" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USBASP_FUNC_SETLONGADDRESS&nbsp;&nbsp;&nbsp;9          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="e52e7b7fa5d58ba171059105d230698a"></a><!-- doxytag: member="main.c::USBASP_FUNC_TRANSMIT" ref="e52e7b7fa5d58ba171059105d230698a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USBASP_FUNC_TRANSMIT&nbsp;&nbsp;&nbsp;3          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="a9257c2f3bbe65e31e0aba2c163e30bf"></a><!-- doxytag: member="main.c::USBASP_FUNC_WRITEEEPROM" ref="a9257c2f3bbe65e31e0aba2c163e30bf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USBASP_FUNC_WRITEEEPROM&nbsp;&nbsp;&nbsp;8          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="5e08b9de457984aeb83030e7e4da6136"></a><!-- doxytag: member="main.c::USBASP_FUNC_WRITEFLASH" ref="5e08b9de457984aeb83030e7e4da6136" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USBASP_FUNC_WRITEFLASH&nbsp;&nbsp;&nbsp;6          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="840291bc02cba5474a4cb46a9b9566fe"></a><!-- doxytag: member="main.c::main" ref="840291bc02cba5474a4cb46a9b9566fe" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="bootloader_2main_8c-source.html#l00265">265</a> of file <a class="el" href="bootloader_2main_8c-source.html">main.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="60cb66d7dc4c292a004b2b4e796a7e0b"></a><!-- doxytag: member="main.c::usbFunctionRead" ref="60cb66d7dc4c292a004b2b4e796a7e0b" args="(uchar *data, uchar len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uchar usbFunctionRead           </td>
          <td>(</td>
          <td class="paramtype">uchar *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uchar&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="bootloader_2main_8c-source.html#l00234">234</a> of file <a class="el" href="bootloader_2main_8c-source.html">main.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="e6f351eca7bf6fb1251f9a478cbae2b0"></a><!-- doxytag: member="main.c::usbFunctionSetup" ref="e6f351eca7bf6fb1251f9a478cbae2b0" args="(uchar data[8])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uchar usbFunctionSetup           </td>
          <td>(</td>
          <td class="paramtype">uchar&nbsp;</td>
          <td class="paramname"> <em>data</em>[8]          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="bootloader_2main_8c-source.html#l00130">130</a> of file <a class="el" href="bootloader_2main_8c-source.html">main.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="92f69288e90801df366cde5a838a818f"></a><!-- doxytag: member="main.c::usbFunctionWrite" ref="92f69288e90801df366cde5a838a818f" args="(uchar *data, uchar len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uchar usbFunctionWrite           </td>
          <td>(</td>
          <td class="paramtype">uchar *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uchar&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="bootloader_2main_8c-source.html#l00184">184</a> of file <a class="el" href="bootloader_2main_8c-source.html">main.c</a>.</p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="3f99531a912706b57d64ce5f10bd12da"></a><!-- doxytag: member="main.c::longConverter_t" ref="3f99531a912706b57d64ce5f10bd12da" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="bootloader_2main_8c.html#3f99531a912706b57d64ce5f10bd12da">longConverter_t</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="bootloader_2main_8c-source.html#l00078">78</a> of file <a class="el" href="bootloader_2main_8c-source.html">main.c</a>.</p>

</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Sat Jul 12 22:27:15 2008 for Dulcimer by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.4 </small></address>
</body>
</html>
