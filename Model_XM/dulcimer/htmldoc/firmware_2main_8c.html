<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Dulcimer: firmware/main.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.4 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
  </ul>
</div>
<h1>firmware/main.c File Reference</h1>Main functions for USB-keyboard. <a href="#_details">More...</a>
<p>
<code>#include &lt;avr/io.h&gt;</code><br>
<code>#include &lt;avr/interrupt.h&gt;</code><br>
<code>#include &lt;avr/pgmspace.h&gt;</code><br>
<code>#include &lt;avr/wdt.h&gt;</code><br>
<code>#include &lt;util/delay.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &quot;usbdrv.h&quot;</code><br>
<code>#include &quot;<a class="el" href="keycodes_8h-source.html">keycodes.h</a>&quot;</code><br>

<p>
<a href="firmware_2main_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structKey.html">Key</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This structure can be used as a container for a single 'key'.  <a href="structKey.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#43bafb28b29491ec7f871319b5a3b2f8">F_CPU</a>&nbsp;&nbsp;&nbsp;12000000L</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">we use a 12MHz crystal  <a href="#43bafb28b29491ec7f871319b5a3b2f8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#cbd3f71ae519660472d571c6991b45a7">PORTCOLUMNS</a>&nbsp;&nbsp;&nbsp;PORTB</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">port on which we read the state of the columns  <a href="#cbd3f71ae519660472d571c6991b45a7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#82f68a695f5614aec3177e08d31ce7c4">PINCOLUMNS</a>&nbsp;&nbsp;&nbsp;PINB</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">port on which we read the state of the columns  <a href="#82f68a695f5614aec3177e08d31ce7c4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#3d5944be3fc9f1c33a00fe64c7b5dfa8">DDRCOLUMNS</a>&nbsp;&nbsp;&nbsp;DDRB</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">port on which we read the state of the columns  <a href="#3d5944be3fc9f1c33a00fe64c7b5dfa8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#2fb9b8c5860d621137c96ef9dd7a3176">PORTROWS1</a>&nbsp;&nbsp;&nbsp;PORTA</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">first port connected to the matrix rows  <a href="#2fb9b8c5860d621137c96ef9dd7a3176"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#f69ec60ca24d74cd54bb3072429179ff">PINROWS1</a>&nbsp;&nbsp;&nbsp;PINA</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">first port connected to the matrix rows  <a href="#f69ec60ca24d74cd54bb3072429179ff"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#054b4efed1b9fe12d1c162ab6eb3e12c">DDRROWS1</a>&nbsp;&nbsp;&nbsp;DDRA</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">first port connected to the matrix rows  <a href="#054b4efed1b9fe12d1c162ab6eb3e12c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#b930861e78c97023f7f919abab96d57b">PORTROWS2</a>&nbsp;&nbsp;&nbsp;PORTC</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">second port connected to the matrix rows  <a href="#b930861e78c97023f7f919abab96d57b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#f3d4ffa580843706c4cb46193942ef05">PINROWS2</a>&nbsp;&nbsp;&nbsp;PINC</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">second port connected to the matrix rows  <a href="#f3d4ffa580843706c4cb46193942ef05"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#257249c4c5913255d7f78061c5c789ce">DDRROWS2</a>&nbsp;&nbsp;&nbsp;DDRC</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">second port connected to the matrix rows  <a href="#257249c4c5913255d7f78061c5c789ce"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#1fc9fdc7dac7819e697429072f86d3de">PORTLEDS</a>&nbsp;&nbsp;&nbsp;PORTD</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">port on which the LEDs are connected  <a href="#1fc9fdc7dac7819e697429072f86d3de"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#bbdadb5969e83f332dfb34029d143b98">PINLEDS</a>&nbsp;&nbsp;&nbsp;PIND</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">port on which the LEDs are connected  <a href="#bbdadb5969e83f332dfb34029d143b98"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#5e47233d3a02fa30d2ce44d60c058926">DDRLEDS</a>&nbsp;&nbsp;&nbsp;DDRD</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">port on which the LEDs are connected  <a href="#5e47233d3a02fa30d2ce44d60c058926"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#87ad17ac607cd11c6852ee2687580ac8">LEDSCROLL</a>&nbsp;&nbsp;&nbsp;PIND4</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">address of the scroll-lock LED  <a href="#87ad17ac607cd11c6852ee2687580ac8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#a1ebb1ee7d6ccd52c5ce53def057e544">LEDCAPS</a>&nbsp;&nbsp;&nbsp;PIND5</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">address of the caps-lock LED  <a href="#a1ebb1ee7d6ccd52c5ce53def057e544"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#070b1a39c765aebc0d4a8353731224e6">LEDNUM</a>&nbsp;&nbsp;&nbsp;PIND6</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">address of the num-lock LED  <a href="#070b1a39c765aebc0d4a8353731224e6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#67297b400546c47d7a4d559747b55e9e">PORTJUMPERS</a>&nbsp;&nbsp;&nbsp;PORTD</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">port for additional jumpers  <a href="#67297b400546c47d7a4d559747b55e9e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#84ff5b11aa05f0a8e7fdd7e96f5c4176">PINJUMPERS</a>&nbsp;&nbsp;&nbsp;PIND</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">port for additional jumpers  <a href="#84ff5b11aa05f0a8e7fdd7e96f5c4176"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#3fdbed5110af4df594238e28a387feb4">DDRJUMPERS</a>&nbsp;&nbsp;&nbsp;DDRD</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">port for additional jumpers  <a href="#3fdbed5110af4df594238e28a387feb4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#f70b2d39906342546418e16f30164bd5">JUMPER0</a>&nbsp;&nbsp;&nbsp;PD1</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">address for jumper 0  <a href="#f70b2d39906342546418e16f30164bd5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#6e6cf6eedfdcc5f2127642dcfda327b6">JUMPER1</a>&nbsp;&nbsp;&nbsp;PD3</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">address for jumper 1  <a href="#6e6cf6eedfdcc5f2127642dcfda327b6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#0ee74732a6d7f3c5fbe4df0b02d036b4">JUMPER2</a>&nbsp;&nbsp;&nbsp;PD7</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">address for jumper 2  <a href="#0ee74732a6d7f3c5fbe4df0b02d036b4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#77440c4104ae0a7368936ff87a3d3260">LED_NUM</a>&nbsp;&nbsp;&nbsp;0x01</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">num LED on a boot-protocol keyboard  <a href="#77440c4104ae0a7368936ff87a3d3260"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#54eff1be759cb6a0ec1f522f985c9c58">LED_CAPS</a>&nbsp;&nbsp;&nbsp;0x02</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">caps LED on a boot-protocol keyboard  <a href="#54eff1be759cb6a0ec1f522f985c9c58"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#4628cba683ac72e812db635372faf88a">LED_SCROLL</a>&nbsp;&nbsp;&nbsp;0x04</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">scroll LED on a boot-protocol keyboard  <a href="#4628cba683ac72e812db635372faf88a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#52baca6b68f2f753638465c69e691d43">LED_COMPOSE</a>&nbsp;&nbsp;&nbsp;0x08</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">compose LED on a boot-protocol keyboard  <a href="#52baca6b68f2f753638465c69e691d43"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#12d4b576a70a2b7a3053adea8fd0a1f6">LED_KANA</a>&nbsp;&nbsp;&nbsp;0x10</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">kana LED on a boot-protocol keyboard  <a href="#12d4b576a70a2b7a3053adea8fd0a1f6"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#1a82bef73edf9d932a10315b0eaaa090">usbFunctionSetup</a> (uint8_t data[8])</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function is called whenever we receive a setup request via USB.  <a href="#1a82bef73edf9d932a10315b0eaaa090"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#149335bbad0138c9c707847dccd448d6">usbFunctionWrite</a> (uchar *data, uchar len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The write function is called when LEDs should be set.  <a href="#149335bbad0138c9c707847dccd448d6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#bffc3119fb17bda876cd9ab7001a0723">usbSendReport</a> (uint8_t mode, uint8_t key)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send a single report to the computer.  <a href="#bffc3119fb17bda876cd9ab7001a0723"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structKey.html">Key</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#ca503c29786de18a51830b94b9dfabb6">charToKey</a> (char character)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convert an ASCII-character to the corresponding key-code and modifier-code combination.  <a href="#ca503c29786de18a51830b94b9dfabb6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#543b8f51828d27738be1d4a9cb636dc5">sendKey</a> (<a class="el" href="structKey.html">Key</a> keytosend)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send a key to the computer, followed by the release of all keys.  <a href="#543b8f51828d27738be1d4a9cb636dc5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#53e32b8c00eb3077d56eb67e69f0f55f">sendString</a> (char *string)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send a string to the computer.  <a href="#53e32b8c00eb3077d56eb67e69f0f55f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#573bbc8f1597b70f671b7849e39dc1f6">printMatrix</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Print the current state of the keyboard in a readable form.  <a href="#573bbc8f1597b70f671b7849e39dc1f6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#e57ab769295229435955aec63fe90a16">scankeys</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Scan and debounce keypresses.  <a href="#e57ab769295229435955aec63fe90a16"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Main function, containing the main loop that manages timer- and USB-functionality.  <a href="#840291bc02cba5474a4cb46a9b9566fe"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#f1cf86b4d81c490f25ab516aed0742f0">expectReport</a> = 0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">flag to indicate if we expect an USB-report  <a href="#f1cf86b4d81c490f25ab516aed0742f0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#01788eba93b64b6aa561a3531b75053e">LEDstate</a> = 0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">current state of the LEDs  <a href="#01788eba93b64b6aa561a3531b75053e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char PROGMEM&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#4c2feb67f6c3add002577ff194ad11d3">usbHidReportDescriptor</a> [USB_CFG_HID_REPORT_DESCRIPTOR_LENGTH]</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">USB report descriptor (length is defined in usbconfig.h).  <a href="#4c2feb67f6c3add002577ff194ad11d3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#4031bd527c85f293b4fca70e11dd337b">curmatrix</a> [16]</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">contains current state of the keyboard  <a href="#4031bd527c85f293b4fca70e11dd337b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const uint8_t PROGMEM&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#aeada6842a93dfcdd895fbdfb22b35c0">keymatrix</a> [16][8]</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The keymatrix-array contains positions of keys in the matrix.  <a href="#aeada6842a93dfcdd895fbdfb22b35c0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const uint8_t PROGMEM&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="firmware_2main_8c.html#9551cf4b116323bed1c59c814ba339d9">modmatrix</a> [16][8]</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The modmatrix-array contains positions of the modifier-keys in the matrix.  <a href="#9551cf4b116323bed1c59c814ba339d9"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Main functions for USB-keyboard. 
<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Ronald Schaten &lt;<a href="mailto:ronald@schatenseite.de">ronald@schatenseite.de</a>&gt; </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd></dd></dl>
<dl class="rcs" compact><dt><b>Id</b></dt><dd>main.c,v 1.5 2008-07-12 21:05:24 rschaten Exp </dd></dl>
<p>
License: GNU GPL v2 (see License.txt) 
<p>Definition in file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="3d5944be3fc9f1c33a00fe64c7b5dfa8"></a><!-- doxytag: member="main.c::DDRCOLUMNS" ref="3d5944be3fc9f1c33a00fe64c7b5dfa8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DDRCOLUMNS&nbsp;&nbsp;&nbsp;DDRB          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
port on which we read the state of the columns 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00225">225</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="3fdbed5110af4df594238e28a387feb4"></a><!-- doxytag: member="main.c::DDRJUMPERS" ref="3fdbed5110af4df594238e28a387feb4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DDRJUMPERS&nbsp;&nbsp;&nbsp;DDRD          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
port for additional jumpers 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00242">242</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="5e47233d3a02fa30d2ce44d60c058926"></a><!-- doxytag: member="main.c::DDRLEDS" ref="5e47233d3a02fa30d2ce44d60c058926" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DDRLEDS&nbsp;&nbsp;&nbsp;DDRD          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
port on which the LEDs are connected 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00235">235</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="054b4efed1b9fe12d1c162ab6eb3e12c"></a><!-- doxytag: member="main.c::DDRROWS1" ref="054b4efed1b9fe12d1c162ab6eb3e12c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DDRROWS1&nbsp;&nbsp;&nbsp;DDRA          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
first port connected to the matrix rows 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00228">228</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>Referenced by <a class="el" href="firmware_2main_8c-source.html#l00679">scankeys()</a>.</p>

</div>
</div><p>
<a class="anchor" name="257249c4c5913255d7f78061c5c789ce"></a><!-- doxytag: member="main.c::DDRROWS2" ref="257249c4c5913255d7f78061c5c789ce" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DDRROWS2&nbsp;&nbsp;&nbsp;DDRC          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
second port connected to the matrix rows 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00231">231</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>Referenced by <a class="el" href="firmware_2main_8c-source.html#l00679">scankeys()</a>.</p>

</div>
</div><p>
<a class="anchor" name="43bafb28b29491ec7f871319b5a3b2f8"></a><!-- doxytag: member="main.c::F_CPU" ref="43bafb28b29491ec7f871319b5a3b2f8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define F_CPU&nbsp;&nbsp;&nbsp;12000000L          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
we use a 12MHz crystal 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00207">207</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="f70b2d39906342546418e16f30164bd5"></a><!-- doxytag: member="main.c::JUMPER0" ref="f70b2d39906342546418e16f30164bd5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define JUMPER0&nbsp;&nbsp;&nbsp;PD1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
address for jumper 0 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00243">243</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="6e6cf6eedfdcc5f2127642dcfda327b6"></a><!-- doxytag: member="main.c::JUMPER1" ref="6e6cf6eedfdcc5f2127642dcfda327b6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define JUMPER1&nbsp;&nbsp;&nbsp;PD3          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
address for jumper 1 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00244">244</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="0ee74732a6d7f3c5fbe4df0b02d036b4"></a><!-- doxytag: member="main.c::JUMPER2" ref="0ee74732a6d7f3c5fbe4df0b02d036b4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define JUMPER2&nbsp;&nbsp;&nbsp;PD7          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
address for jumper 2 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00245">245</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="54eff1be759cb6a0ec1f522f985c9c58"></a><!-- doxytag: member="main.c::LED_CAPS" ref="54eff1be759cb6a0ec1f522f985c9c58" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LED_CAPS&nbsp;&nbsp;&nbsp;0x02          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
caps LED on a boot-protocol keyboard 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00291">291</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>Referenced by <a class="el" href="firmware_2main_8c-source.html#l00384">usbFunctionWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="52baca6b68f2f753638465c69e691d43"></a><!-- doxytag: member="main.c::LED_COMPOSE" ref="52baca6b68f2f753638465c69e691d43" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LED_COMPOSE&nbsp;&nbsp;&nbsp;0x08          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
compose LED on a boot-protocol keyboard 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00293">293</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="12d4b576a70a2b7a3053adea8fd0a1f6"></a><!-- doxytag: member="main.c::LED_KANA" ref="12d4b576a70a2b7a3053adea8fd0a1f6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LED_KANA&nbsp;&nbsp;&nbsp;0x10          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
kana LED on a boot-protocol keyboard 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00294">294</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="77440c4104ae0a7368936ff87a3d3260"></a><!-- doxytag: member="main.c::LED_NUM" ref="77440c4104ae0a7368936ff87a3d3260" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LED_NUM&nbsp;&nbsp;&nbsp;0x01          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
num LED on a boot-protocol keyboard 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00290">290</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>Referenced by <a class="el" href="firmware_2main_8c-source.html#l00384">usbFunctionWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="4628cba683ac72e812db635372faf88a"></a><!-- doxytag: member="main.c::LED_SCROLL" ref="4628cba683ac72e812db635372faf88a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LED_SCROLL&nbsp;&nbsp;&nbsp;0x04          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
scroll LED on a boot-protocol keyboard 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00292">292</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>Referenced by <a class="el" href="firmware_2main_8c-source.html#l00384">usbFunctionWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a1ebb1ee7d6ccd52c5ce53def057e544"></a><!-- doxytag: member="main.c::LEDCAPS" ref="a1ebb1ee7d6ccd52c5ce53def057e544" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LEDCAPS&nbsp;&nbsp;&nbsp;PIND5          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
address of the caps-lock LED 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00237">237</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>Referenced by <a class="el" href="firmware_2main_8c-source.html#l00384">usbFunctionWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="070b1a39c765aebc0d4a8353731224e6"></a><!-- doxytag: member="main.c::LEDNUM" ref="070b1a39c765aebc0d4a8353731224e6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LEDNUM&nbsp;&nbsp;&nbsp;PIND6          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
address of the num-lock LED 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00238">238</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>Referenced by <a class="el" href="firmware_2main_8c-source.html#l00384">usbFunctionWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="87ad17ac607cd11c6852ee2687580ac8"></a><!-- doxytag: member="main.c::LEDSCROLL" ref="87ad17ac607cd11c6852ee2687580ac8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LEDSCROLL&nbsp;&nbsp;&nbsp;PIND4          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
address of the scroll-lock LED 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00236">236</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>Referenced by <a class="el" href="firmware_2main_8c-source.html#l00384">usbFunctionWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="82f68a695f5614aec3177e08d31ce7c4"></a><!-- doxytag: member="main.c::PINCOLUMNS" ref="82f68a695f5614aec3177e08d31ce7c4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PINCOLUMNS&nbsp;&nbsp;&nbsp;PINB          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
port on which we read the state of the columns 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00224">224</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>Referenced by <a class="el" href="firmware_2main_8c-source.html#l00679">scankeys()</a>.</p>

</div>
</div><p>
<a class="anchor" name="84ff5b11aa05f0a8e7fdd7e96f5c4176"></a><!-- doxytag: member="main.c::PINJUMPERS" ref="84ff5b11aa05f0a8e7fdd7e96f5c4176" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PINJUMPERS&nbsp;&nbsp;&nbsp;PIND          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
port for additional jumpers 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00241">241</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="bbdadb5969e83f332dfb34029d143b98"></a><!-- doxytag: member="main.c::PINLEDS" ref="bbdadb5969e83f332dfb34029d143b98" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PINLEDS&nbsp;&nbsp;&nbsp;PIND          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
port on which the LEDs are connected 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00234">234</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="f69ec60ca24d74cd54bb3072429179ff"></a><!-- doxytag: member="main.c::PINROWS1" ref="f69ec60ca24d74cd54bb3072429179ff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PINROWS1&nbsp;&nbsp;&nbsp;PINA          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
first port connected to the matrix rows 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00227">227</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="f3d4ffa580843706c4cb46193942ef05"></a><!-- doxytag: member="main.c::PINROWS2" ref="f3d4ffa580843706c4cb46193942ef05" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PINROWS2&nbsp;&nbsp;&nbsp;PINC          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
second port connected to the matrix rows 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00230">230</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="cbd3f71ae519660472d571c6991b45a7"></a><!-- doxytag: member="main.c::PORTCOLUMNS" ref="cbd3f71ae519660472d571c6991b45a7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORTCOLUMNS&nbsp;&nbsp;&nbsp;PORTB          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
port on which we read the state of the columns 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00223">223</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="67297b400546c47d7a4d559747b55e9e"></a><!-- doxytag: member="main.c::PORTJUMPERS" ref="67297b400546c47d7a4d559747b55e9e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORTJUMPERS&nbsp;&nbsp;&nbsp;PORTD          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
port for additional jumpers 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00240">240</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="1fc9fdc7dac7819e697429072f86d3de"></a><!-- doxytag: member="main.c::PORTLEDS" ref="1fc9fdc7dac7819e697429072f86d3de" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORTLEDS&nbsp;&nbsp;&nbsp;PORTD          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
port on which the LEDs are connected 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00233">233</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>Referenced by <a class="el" href="firmware_2main_8c-source.html#l00384">usbFunctionWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="2fb9b8c5860d621137c96ef9dd7a3176"></a><!-- doxytag: member="main.c::PORTROWS1" ref="2fb9b8c5860d621137c96ef9dd7a3176" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORTROWS1&nbsp;&nbsp;&nbsp;PORTA          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
first port connected to the matrix rows 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00226">226</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>Referenced by <a class="el" href="firmware_2main_8c-source.html#l00679">scankeys()</a>.</p>

</div>
</div><p>
<a class="anchor" name="b930861e78c97023f7f919abab96d57b"></a><!-- doxytag: member="main.c::PORTROWS2" ref="b930861e78c97023f7f919abab96d57b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PORTROWS2&nbsp;&nbsp;&nbsp;PORTC          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
second port connected to the matrix rows 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00229">229</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>Referenced by <a class="el" href="firmware_2main_8c-source.html#l00679">scankeys()</a>.</p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="ca503c29786de18a51830b94b9dfabb6"></a><!-- doxytag: member="main.c::charToKey" ref="ca503c29786de18a51830b94b9dfabb6" args="(char character)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structKey.html">Key</a> charToKey           </td>
          <td>(</td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>character</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Convert an ASCII-character to the corresponding key-code and modifier-code combination. 
<p>
character ASCII-character to convert <dl class="return" compact><dt><b>Returns:</b></dt><dd>structure containing the combination </dd></dl>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00493">493</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>References <a class="el" href="firmware_2main_8c-source.html#l00484">Key::key</a>, <a class="el" href="keycodes_8h-source.html#l00071">KEY_0</a>, <a class="el" href="keycodes_8h-source.html#l00062">KEY_1</a>, <a class="el" href="keycodes_8h-source.html#l00065">KEY_4</a>, <a class="el" href="keycodes_8h-source.html#l00066">KEY_5</a>, <a class="el" href="keycodes_8h-source.html#l00067">KEY_6</a>, <a class="el" href="keycodes_8h-source.html#l00068">KEY_7</a>, <a class="el" href="keycodes_8h-source.html#l00069">KEY_8</a>, <a class="el" href="keycodes_8h-source.html#l00070">KEY_9</a>, <a class="el" href="keycodes_8h-source.html#l00084">KEY_apostroph</a>, <a class="el" href="keycodes_8h-source.html#l00081">KEY_backslash</a>, <a class="el" href="keycodes_8h-source.html#l00086">KEY_comma</a>, <a class="el" href="keycodes_8h-source.html#l00087">KEY_dot</a>, <a class="el" href="keycodes_8h-source.html#l00078">KEY_equals</a>, <a class="el" href="keycodes_8h-source.html#l00085">KEY_grave</a>, <a class="el" href="keycodes_8h-source.html#l00082">KEY_hash</a>, <a class="el" href="keycodes_8h-source.html#l00079">KEY_lbracket</a>, <a class="el" href="keycodes_8h-source.html#l00077">KEY_minus</a>, <a class="el" href="keycodes_8h-source.html#l00080">KEY_rbracket</a>, <a class="el" href="keycodes_8h-source.html#l00032">KEY_Reserved</a>, <a class="el" href="keycodes_8h-source.html#l00083">KEY_semicolon</a>, <a class="el" href="keycodes_8h-source.html#l00088">KEY_slash</a>, <a class="el" href="keycodes_8h-source.html#l00076">KEY_Spacebar</a>, <a class="el" href="keycodes_8h-source.html#l00019">MOD_NONE</a>, <a class="el" href="keycodes_8h-source.html#l00021">MOD_SHIFT_LEFT</a>, and <a class="el" href="firmware_2main_8c-source.html#l00483">Key::mode</a>.</p>

<p>Referenced by <a class="el" href="firmware_2main_8c-source.html#l00631">sendString()</a>.</p>

</div>
</div><p>
<a class="anchor" name="840291bc02cba5474a4cb46a9b9566fe"></a><!-- doxytag: member="main.c::main" ref="840291bc02cba5474a4cb46a9b9566fe" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Main function, containing the main loop that manages timer- and USB-functionality. 
<p>
/return the obligatory integer that nobody cares about... 
<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00755">755</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>References <a class="el" href="firmware_2main_8c-source.html#l00679">scankeys()</a>.</p>

</div>
</div><p>
<a class="anchor" name="573bbc8f1597b70f671b7849e39dc1f6"></a><!-- doxytag: member="main.c::printMatrix" ref="573bbc8f1597b70f671b7849e39dc1f6" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void printMatrix           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Print the current state of the keyboard in a readable form. 
<p>
This function is used for debug-purposes only. 
<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00642">642</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>References <a class="el" href="firmware_2main_8c-source.html#l00424">curmatrix</a>, and <a class="el" href="firmware_2main_8c-source.html#l00631">sendString()</a>.</p>

</div>
</div><p>
<a class="anchor" name="e57ab769295229435955aec63fe90a16"></a><!-- doxytag: member="main.c::scankeys" ref="e57ab769295229435955aec63fe90a16" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t scankeys           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Scan and debounce keypresses. 
<p>
This is the main worker function for normal keyboard operation, the code contains lot of comments. Basically, it first scans the keyboard state. If a change is detected, it initializes a counter that is decreased each time this function is called. If the counter reaches 1, that means that the same scan result has been scanned ten times in a row, so we can be pretty sure that the keys are in a certain state (as in: not bouncing). Then, the codes for keys and modifiers are searched from the two arrays, the USB-message to send the state is prepared. The return value of this function indicates if the message has to be sent. <dl class="return" compact><dt><b>Returns:</b></dt><dd>flag to indicate whether something has changed </dd></dl>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00679">679</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>References <a class="el" href="firmware_2main_8c-source.html#l00424">curmatrix</a>, <a class="el" href="firmware_2main_8c-source.html#l00228">DDRROWS1</a>, <a class="el" href="firmware_2main_8c-source.html#l00231">DDRROWS2</a>, <a class="el" href="keycodes_8h-source.html#l00033">KEY_ErrorRollOver</a>, <a class="el" href="keycodes_8h-source.html#l00032">KEY_Reserved</a>, <a class="el" href="firmware_2main_8c-source.html#l00433">keymatrix</a>, <a class="el" href="keycodes_8h-source.html#l00019">MOD_NONE</a>, <a class="el" href="firmware_2main_8c-source.html#l00458">modmatrix</a>, <a class="el" href="firmware_2main_8c-source.html#l00224">PINCOLUMNS</a>, <a class="el" href="firmware_2main_8c-source.html#l00226">PORTROWS1</a>, and <a class="el" href="firmware_2main_8c-source.html#l00229">PORTROWS2</a>.</p>

<p>Referenced by <a class="el" href="firmware_2main_8c-source.html#l00755">main()</a>.</p>

</div>
</div><p>
<a class="anchor" name="543b8f51828d27738be1d4a9cb636dc5"></a><!-- doxytag: member="main.c::sendKey" ref="543b8f51828d27738be1d4a9cb636dc5" args="(Key keytosend)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sendKey           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structKey.html">Key</a>&nbsp;</td>
          <td class="paramname"> <em>keytosend</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send a key to the computer, followed by the release of all keys. 
<p>
This can be used repetitively to send a string. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>keytosend</em>&nbsp;</td><td>key structure to send </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00621">621</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>References <a class="el" href="firmware_2main_8c-source.html#l00484">Key::key</a>, <a class="el" href="firmware_2main_8c-source.html#l00483">Key::mode</a>, and <a class="el" href="firmware_2main_8c-source.html#l00413">usbSendReport()</a>.</p>

<p>Referenced by <a class="el" href="firmware_2main_8c-source.html#l00631">sendString()</a>.</p>

</div>
</div><p>
<a class="anchor" name="53e32b8c00eb3077d56eb67e69f0f55f"></a><!-- doxytag: member="main.c::sendString" ref="53e32b8c00eb3077d56eb67e69f0f55f" args="(char *string)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sendString           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>string</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send a string to the computer. 
<p>
This function converts each character of an ASCII-string to a key-structure and uses <a class="el" href="firmware_2main_8c.html#543b8f51828d27738be1d4a9cb636dc5" title="Send a key to the computer, followed by the release of all keys.">sendKey()</a> to send it. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>string to send </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00631">631</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>References <a class="el" href="firmware_2main_8c-source.html#l00493">charToKey()</a>, and <a class="el" href="firmware_2main_8c-source.html#l00621">sendKey()</a>.</p>

<p>Referenced by <a class="el" href="firmware_2main_8c-source.html#l00642">printMatrix()</a>.</p>

</div>
</div><p>
<a class="anchor" name="1a82bef73edf9d932a10315b0eaaa090"></a><!-- doxytag: member="main.c::usbFunctionSetup" ref="1a82bef73edf9d932a10315b0eaaa090" args="(uint8_t data[8])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t usbFunctionSetup           </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>data</em>[8]          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function is called whenever we receive a setup request via USB. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>data[8]</em>&nbsp;</td><td>eight bytes of data we received </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>number of bytes to use, or 0xff if <a class="el" href="bootloader_2main_8c.html#92f69288e90801df366cde5a838a818f">usbFunctionWrite()</a> should be called </dd></dl>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00343">343</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>References <a class="el" href="firmware_2main_8c-source.html#l00288">expectReport</a>.</p>

</div>
</div><p>
<a class="anchor" name="149335bbad0138c9c707847dccd448d6"></a><!-- doxytag: member="main.c::usbFunctionWrite" ref="149335bbad0138c9c707847dccd448d6" args="(uchar *data, uchar len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t usbFunctionWrite           </td>
          <td>(</td>
          <td class="paramtype">uchar *&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uchar&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The write function is called when LEDs should be set. 
<p>
Normally, we get only one byte that contains info about the LED states. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>pointer to received data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>number ob bytes received </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0x01 </dd></dl>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00384">384</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>References <a class="el" href="firmware_2main_8c-source.html#l00288">expectReport</a>, <a class="el" href="firmware_2main_8c-source.html#l00291">LED_CAPS</a>, <a class="el" href="firmware_2main_8c-source.html#l00290">LED_NUM</a>, <a class="el" href="firmware_2main_8c-source.html#l00292">LED_SCROLL</a>, <a class="el" href="firmware_2main_8c-source.html#l00237">LEDCAPS</a>, <a class="el" href="firmware_2main_8c-source.html#l00238">LEDNUM</a>, <a class="el" href="firmware_2main_8c-source.html#l00236">LEDSCROLL</a>, <a class="el" href="firmware_2main_8c-source.html#l00295">LEDstate</a>, and <a class="el" href="firmware_2main_8c-source.html#l00233">PORTLEDS</a>.</p>

</div>
</div><p>
<a class="anchor" name="bffc3119fb17bda876cd9ab7001a0723"></a><!-- doxytag: member="main.c::usbSendReport" ref="bffc3119fb17bda876cd9ab7001a0723" args="(uint8_t mode, uint8_t key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void usbSendReport           </td>
          <td>(</td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>key</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send a single report to the computer. 
<p>
This function is not used during normal typing, it is only used to send non-pressed keys to simulate input. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>modifier-byte </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>key-code </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00413">413</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>Referenced by <a class="el" href="firmware_2main_8c-source.html#l00621">sendKey()</a>.</p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="4031bd527c85f293b4fca70e11dd337b"></a><!-- doxytag: member="main.c::curmatrix" ref="4031bd527c85f293b4fca70e11dd337b" args="[16]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="firmware_2main_8c.html#4031bd527c85f293b4fca70e11dd337b">curmatrix</a>[16]          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
contains current state of the keyboard 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00424">424</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>Referenced by <a class="el" href="firmware_2main_8c-source.html#l00642">printMatrix()</a>, and <a class="el" href="firmware_2main_8c-source.html#l00679">scankeys()</a>.</p>

</div>
</div><p>
<a class="anchor" name="f1cf86b4d81c490f25ab516aed0742f0"></a><!-- doxytag: member="main.c::expectReport" ref="f1cf86b4d81c490f25ab516aed0742f0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="firmware_2main_8c.html#f1cf86b4d81c490f25ab516aed0742f0">expectReport</a> = 0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
flag to indicate if we expect an USB-report 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00288">288</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>Referenced by <a class="el" href="firmware_2main_8c-source.html#l00343">usbFunctionSetup()</a>, and <a class="el" href="firmware_2main_8c-source.html#l00384">usbFunctionWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="aeada6842a93dfcdd895fbdfb22b35c0"></a><!-- doxytag: member="main.c::keymatrix" ref="aeada6842a93dfcdd895fbdfb22b35c0" args="[16][8]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t PROGMEM <a class="el" href="firmware_2main_8c.html#aeada6842a93dfcdd895fbdfb22b35c0">keymatrix</a>[16][8]          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
  
    {<a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213ba445101e4a53cb60973ae8ddd7ca3c44">KEY_Reserved</a>,  <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213ba445101e4a53cb60973ae8ddd7ca3c44">KEY_Reserved</a>, KEY_Reserved,      KEY_Reserved,    KEY_Reserved,   KEY_Reserved,  KEY_Reserved,   KEY_Reserved   }, 
    {<a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213ba445101e4a53cb60973ae8ddd7ca3c44">KEY_Reserved</a>,  <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213ba445101e4a53cb60973ae8ddd7ca3c44">KEY_Reserved</a>, KEY_Reserved,      KEY_Reserved,    KEY_Reserved,   KEY_Reserved,  KEY_Reserved,   KEY_Reserved   }, 
    {<a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b3a471c8b61a5f730dcbdd50fe53f3ab7">KEY_ESCAPE</a>,    <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213ba8ce40600f1126563b446ae125d6b978">KEY_Tab</a>,      <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213bf5b841aa798b3ecd6b9177489586a865">KEY_grave</a>,         <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b35bcc2bc85513df4f3897a9d64a9c51c">KEY_1</a>,           <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213bc8234231b36474d3666ad56752fe6f5e">KEY_Q</a>,          <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213ba7b3a3d0503a46bec51c6e3da95747cc">KEY_A</a>,         <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213badc60d2de1d019604547c0df88f84cda">KEY_Z</a>,          <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213ba445101e4a53cb60973ae8ddd7ca3c44">KEY_Reserved</a>   }, 
    {<a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213bc5b2ffe1e64f922888ff7905f16ffb2c">KEY_Euro</a>,      <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213ba65c9695b0e41f370d1ef944e672e28c">KEY_capslock</a>, <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213bfcf70bc39c0032de8a1c6452ac9860a5">KEY_F1</a>,            <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b2333d7c312aa98622c41e74c5d13e8de">KEY_2</a>,           <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b2e6a652ccd7afc5ce75ac4d902b6a60a">KEY_W</a>,          <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213bbb2f0ce8efc3067757dbf091437f89f5">KEY_S</a>,         <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b480a807305121d41673b8c208898f497">KEY_X</a>,          <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213ba445101e4a53cb60973ae8ddd7ca3c44">KEY_Reserved</a>   }, 
    {<a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b01bce78a73ad136a7b42941297aff373">KEY_F4</a>,        <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b965c99b1f4fc05cec09ef61b0af8e74a">KEY_F3</a>,       <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b87897fd25282941e1a9bf72b9f64559a">KEY_F2</a>,            <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213bef054680a9be7da17d196e15aec894f8">KEY_3</a>,           <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b2af9840d90c49239339bfd42f9f32868">KEY_E</a>,          <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b2fd73a4d527efe137e8f259db2092766">KEY_D</a>,         <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b9cabc5fc0d1f7f6a78e78b8ff29dbb61">KEY_C</a>,          <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213ba445101e4a53cb60973ae8ddd7ca3c44">KEY_Reserved</a>   }, 
    {<a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b4ec980867be1d5bded2bccdee2ebd601">KEY_G</a>,         <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b6167a8727e73df1eb96f19c2460766c9">KEY_T</a>,        <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213bed864c0209ba46546ba112f6c36e0cc4">KEY_5</a>,             <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213be9f20352b4ef69ae68b9ff44abadfd79">KEY_4</a>,           <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213ba3ec8a2ffd5b0e200db5ebe7b65515ff">KEY_R</a>,          <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b3c069efeb1638c2ab0d2a50ff45b529f">KEY_F</a>,         <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213bfa1c237398bdfc48e5c1a55ce4a977fe">KEY_V</a>,          <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b10072b5ee7aa1faf316434ecc9e2bb3a">KEY_B</a>          }, 
    {<a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b6a69ea34f5d1372692bf040637e57c8f">KEY_F5</a>,        <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213be7a3a4540031b038014294aa6743a7a4">KEY_DELETE</a>,   <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b160e82eea885870bfa4924c27040cd7f">KEY_F9</a>,            <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b3b922025c26b38585ab140c7e40b291c">KEY_F10</a>,         <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213ba445101e4a53cb60973ae8ddd7ca3c44">KEY_Reserved</a>,   KEY_Reserved,  <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b8182d6dbf79f5e9ef1fe328d372a27d8">KEY_Return</a>,     <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b5b4172926f250f5a6321c03d3cd4e540">KEY_Spacebar</a>   }, 
    {<a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b41d1aa573d29ca6a9eb429a680dc53cd">KEY_H</a>,         <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b5d44524b2a6090fa97aa9353d69f67a3">KEY_Y</a>,        <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b2fe7fe99bcb0fd90bf4234be9e4ce5be">KEY_6</a>,             <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213be78c88108d428cb8066e7a056195f489">KEY_7</a>,           <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213bd4961a6c7ea9d008812aaaa8c4ea9730">KEY_U</a>,          <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213bbb3108883bee68e265b554542484c5d7">KEY_J</a>,         <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b0d94112555886427204ad0c0711ca327">KEY_M</a>,          <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213ba606b8c6deaec8077387975d195cd824">KEY_N</a>          }, 
    {<a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b247a20a9998f080827dd34004abc2f9a">KEY_F6</a>,        <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b6d7217ab6d79bf19af11b316c51ad9a5">KEY_rbracket</a>, <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213becf765a0ba929e48c2d9bcef32da6bed">KEY_equals</a>,        <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213bab8917d426f9be27c95c0d3810006d7b">KEY_8</a>,           <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b2c98fd67709a9fd5409498d4f7175877">KEY_I</a>,          <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b6b0799a9923c55f8a73550a371ea69f6">KEY_K</a>,         <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213bae069bb853da6198faf7f8c6c566ec22">KEY_comma</a>,      <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213ba445101e4a53cb60973ae8ddd7ca3c44">KEY_Reserved</a>   }, 
    {<a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213ba445101e4a53cb60973ae8ddd7ca3c44">KEY_Reserved</a>,  <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b34a07203a0a4f3e996b44e9a4fcfd1c6">KEY_F7</a>,       <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b9eaf4e9e3d8451fd1332c013d12c1375">KEY_F8</a>,            <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b601382e2da6215882c129b43b3384611">KEY_9</a>,           <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213be7edd672641b587364ea4a0c89388290">KEY_O</a>,          <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213bece16de35a5ea11f9b228c9376bebc62">KEY_L</a>,         <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b4e8875697d37e50ab2b3405761f9bd99">KEY_dot</a>,        <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213ba445101e4a53cb60973ae8ddd7ca3c44">KEY_Reserved</a>   }, 
    {<a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213be594104ae7fac91205a4f6442d94541f">KEY_apostroph</a>, <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213bc215b592df3fcfa09524a7731f9baa7c">KEY_lbracket</a>, <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213bb29b19d351777f2a79e68320245d0020">KEY_minus</a>,         <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b6b30f8af6c880e1aca01b91aa13c6ff9">KEY_0</a>,           <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b0a4c7291c92b7fc84da27a363dc53fa6">KEY_P</a>,          <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b1a96bfea47443371323d38fd7337423e">KEY_semicolon</a>, <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b826e6106afa1dc35fc5cc507b13bb685">KEY_hash</a>,       <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b5704a5a3c1bddd6c1aa7405494ef6739">KEY_slash</a>      }, 
    {<a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213ba445101e4a53cb60973ae8ddd7ca3c44">KEY_Reserved</a>,  <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213be81b76194e0134be24fbddc17902db67">KEY_KP4</a>,      <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213ba0be6f468513f11fa341b4a77593f815">KEY_DeleteForward</a>, <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213bd54743bc4e7f9279abf671cc2a091ce1">KEY_F11</a>,         <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213bd0a2113ba357712bf9d878e455520bee">KEY_KP7</a>,        <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b8722e6d09e3e6dcf572fd5add35bb43c">KEY_KP1</a>,       <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213bb7a7385fb898a4107695701fc7d4185c">KEY_NumLock</a>,    <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b0bfe71755dd0d220a4b27a74e64e01a2">KEY_DownArrow</a>  }, 
    {<a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213be00957bb77b4a481cc7a7bad292b3fb8">KEY_KP0</a>,       <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b4c98effab9ba6f8234202832a31cdd9e">KEY_KP5</a>,      <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b8077c04a6442085c81ba09b4cef4a409">KEY_Insert</a>,        <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b835f8397baa58fd73ff9c268d6458add">KEY_F12</a>,         <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b0cfe0de974f76f12db02944857f41d45">KEY_KP8</a>,        <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b9d43270c809e5e3b19308feb5b27df62">KEY_KP2</a>,       <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b359d17f3787db848beb3be458e8b5b29">KEY_KPslash</a>,    <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213bdbbefafd0e8f5b60c6af544f6db1f89b">KEY_RightArrow</a> }, 
    {<a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b98a211310dace4ef28b0860b57132dec">KEY_KPcomma</a>,   <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213beafa6012e78346503106effe78f29284">KEY_KP6</a>,      <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b02658341220d583f880c209fa43180ec">KEY_PageUp</a>,        <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b3c4718c24b57634aab0d088248b30326">KEY_PageDown</a>,    <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b66d927bbf4ac4c6b025259a42664efec">KEY_KP9</a>,        <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b824ec486e8fad4215e6c518af31c5255">KEY_KP3</a>,       <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213bc1d917976d7bda5255480dae66694ba6">KEY_KPasterisk</a>, <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b13560a16dc9444e510d4b8bfd4823574">KEY_KPminus</a>    }, 
    {<a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b2884c5d5d4de5b716ac2203cdf2d06ee">KEY_UpArrow</a>,   <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213ba445101e4a53cb60973ae8ddd7ca3c44">KEY_Reserved</a>, <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213bdda84c0a588c5183fb04c2f1398fcdfc">KEY_Home</a>,          <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213ba3c7406c22ee8fa8e649b0400e4a43e3">KEY_End</a>,         <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213baf922bcddd53cb5b2f92255c715c002d">KEY_KPplus</a>,     <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b0f04c9403facf3f75d23319d96b02470">KEY_KPenter</a>,   <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b71f6852005ab561904a547dc717d7a65">KEY_Pause</a>,      <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b7aea3ca4c8f927255e90212853bacac3">KEY_LeftArrow</a>  }, 
    {<a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213ba445101e4a53cb60973ae8ddd7ca3c44">KEY_Reserved</a>,  <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213ba445101e4a53cb60973ae8ddd7ca3c44">KEY_Reserved</a>, KEY_Reserved,      <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b44c5ddea2cbfd857b3c90c185fd502b6">KEY_PrintScreen</a>, <a class="code" href="keycodes_8h.html#69877ab2ad01f176a4e2f2095fd3213b8022e5ff7edc436af9555e08a365925a">KEY_ScrollLock</a>, KEY_Reserved,  KEY_Reserved,   KEY_Reserved   }, 
}
</pre></div>The keymatrix-array contains positions of keys in the matrix. 
<p>
Here you can see which row is connected to which column when a key is pressed. This array probably has to be modified if this firmware is ported to a different keyboard. <dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="firmware_2main_8c.html#9551cf4b116323bed1c59c814ba339d9" title="The modmatrix-array contains positions of the modifier-keys in the matrix.">modmatrix</a> </dd></dl>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00433">433</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>Referenced by <a class="el" href="firmware_2main_8c-source.html#l00679">scankeys()</a>.</p>

</div>
</div><p>
<a class="anchor" name="01788eba93b64b6aa561a3531b75053e"></a><!-- doxytag: member="main.c::LEDstate" ref="01788eba93b64b6aa561a3531b75053e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="firmware_2main_8c.html#01788eba93b64b6aa561a3531b75053e">LEDstate</a> = 0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
current state of the LEDs 
<p>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00295">295</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>Referenced by <a class="el" href="firmware_2main_8c-source.html#l00384">usbFunctionWrite()</a>.</p>

</div>
</div><p>
<a class="anchor" name="9551cf4b116323bed1c59c814ba339d9"></a><!-- doxytag: member="main.c::modmatrix" ref="9551cf4b116323bed1c59c814ba339d9" args="[16][8]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t PROGMEM <a class="el" href="firmware_2main_8c.html#9551cf4b116323bed1c59c814ba339d9">modmatrix</a>[16][8]          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> { 
  
    {<a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,     <a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,       <a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53d27265b5549a662ed7263825d251fb74">MOD_CONTROL_LEFT</a>, MOD_NONE, MOD_NONE, MOD_NONE, <a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f533a3c43335f325f4daba7f8d7f74238fa">MOD_CONTROL_RIGHT</a>, MOD_NONE     }, 
    {<a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,     <a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53e6d6db5c56ff582aed6cf2107fa4f8f1">MOD_SHIFT_LEFT</a>, <a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,         MOD_NONE, MOD_NONE, MOD_NONE, <a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f5314c385bb2c900ef45c820146fa067052">MOD_SHIFT_RIGHT</a>,   MOD_NONE     }, 
    {<a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,     <a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,       MOD_NONE,         MOD_NONE, MOD_NONE, MOD_NONE, MOD_NONE,          MOD_NONE     }, 
    {<a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,     <a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,       MOD_NONE,         MOD_NONE, MOD_NONE, MOD_NONE, MOD_NONE,          MOD_NONE     }, 
    {<a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,     <a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,       MOD_NONE,         MOD_NONE, MOD_NONE, MOD_NONE, MOD_NONE,          MOD_NONE     }, 
    {<a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,     <a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,       MOD_NONE,         MOD_NONE, MOD_NONE, MOD_NONE, MOD_NONE,          MOD_NONE     }, 
    {<a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,     <a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,       MOD_NONE,         MOD_NONE, MOD_NONE, MOD_NONE, MOD_NONE,          MOD_NONE     }, 
    {<a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,     <a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,       MOD_NONE,         MOD_NONE, MOD_NONE, MOD_NONE, MOD_NONE,          MOD_NONE     }, 
    {<a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,     <a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,       MOD_NONE,         MOD_NONE, MOD_NONE, MOD_NONE, MOD_NONE,          MOD_NONE     }, 
    {<a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,     <a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,       MOD_NONE,         MOD_NONE, MOD_NONE, MOD_NONE, MOD_NONE,          MOD_NONE     }, 
    {<a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,     <a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,       MOD_NONE,         MOD_NONE, MOD_NONE, MOD_NONE, MOD_NONE,          MOD_NONE     }, 
    {<a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,     <a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,       MOD_NONE,         MOD_NONE, MOD_NONE, MOD_NONE, MOD_NONE,          MOD_NONE     }, 
    {<a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,     <a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,       MOD_NONE,         MOD_NONE, MOD_NONE, MOD_NONE, MOD_NONE,          MOD_NONE     }, 
    {<a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,     <a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,       MOD_NONE,         MOD_NONE, MOD_NONE, MOD_NONE, MOD_NONE,          MOD_NONE     }, 
    {<a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,     <a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,       MOD_NONE,         MOD_NONE, MOD_NONE, MOD_NONE, MOD_NONE,          MOD_NONE     }, 
    {<a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53dd6fc5bb0b74b459d8299103406e5a88">MOD_ALT_LEFT</a>, <a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f53a8f2a864daf0fc895eb702ab057b34c7">MOD_NONE</a>,       MOD_NONE,         MOD_NONE, MOD_NONE, MOD_NONE, MOD_NONE,          <a class="code" href="keycodes_8h.html#d40e52e166700bbc1292f040353f1f534656c6d2d64b0e6be580762571c78d28">MOD_ALT_RIGHT</a>}, 
}
</pre></div>The modmatrix-array contains positions of the modifier-keys in the matrix. 
<p>
It is built in the same way as the keymatrix-array. <dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="firmware_2main_8c.html#aeada6842a93dfcdd895fbdfb22b35c0" title="The keymatrix-array contains positions of keys in the matrix.">keymatrix</a> </dd></dl>

<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00458">458</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

<p>Referenced by <a class="el" href="firmware_2main_8c-source.html#l00679">scankeys()</a>.</p>

</div>
</div><p>
<a class="anchor" name="4c2feb67f6c3add002577ff194ad11d3"></a><!-- doxytag: member="main.c::usbHidReportDescriptor" ref="4c2feb67f6c3add002577ff194ad11d3" args="[USB_CFG_HID_REPORT_DESCRIPTOR_LENGTH]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char PROGMEM <a class="el" href="firmware_2main_8c.html#4c2feb67f6c3add002577ff194ad11d3">usbHidReportDescriptor</a>[USB_CFG_HID_REPORT_DESCRIPTOR_LENGTH]          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
USB report descriptor (length is defined in usbconfig.h). 
<p>
The report descriptor has been created with usb.org's "HID Descriptor Tool" which can be downloaded from <a href="http://www.usb.org/developers/hidpage/">http://www.usb.org/developers/hidpage/</a> (it's an .exe, but it even runs under Wine). 
<p>Definition at line <a class="el" href="firmware_2main_8c-source.html#l00302">302</a> of file <a class="el" href="firmware_2main_8c-source.html">main.c</a>.</p>

</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Sat Jul 12 22:27:15 2008 for Dulcimer by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.4 </small></address>
</body>
</html>
