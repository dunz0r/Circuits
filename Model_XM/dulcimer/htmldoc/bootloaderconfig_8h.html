<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Dulcimer: bootloader/bootloaderconfig.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.4 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
  </ul>
</div>
<h1>bootloader/bootloaderconfig.h File Reference</h1>This file (together with some settings in Makefile) configures the boot loader according to the hardware. <a href="#_details">More...</a>
<p>

<p>
<a href="bootloaderconfig_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloaderconfig_8h.html#98ed17962b55543b35e10ae1f8ebe09b">USB_CFG_IOPORTNAME</a>&nbsp;&nbsp;&nbsp;D</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is the port where the USB bus is connected.  <a href="#98ed17962b55543b35e10ae1f8ebe09b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloaderconfig_8h.html#3a8bf6679cd70d1ddcc05024ffef9922">USB_CFG_DMINUS_BIT</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is the bit number in USB_CFG_IOPORT where the USB D- line is connected.  <a href="#3a8bf6679cd70d1ddcc05024ffef9922"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloaderconfig_8h.html#3005cdbb03c707af8007363632d7d02d">USB_CFG_DPLUS_BIT</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is the bit number in USB_CFG_IOPORT where the USB D+ line is connected.  <a href="#3005cdbb03c707af8007363632d7d02d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloaderconfig_8h.html#9bf12dabd0e5186299ed0f13cd00dfeb">USB_CFG_CLOCK_KHZ</a>&nbsp;&nbsp;&nbsp;(F_CPU/1000)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Clock rate of the AVR in MHz.  <a href="#9bf12dabd0e5186299ed0f13cd00dfeb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloaderconfig_8h.html#42a0af8a7294752a43cdc9b0304326a2">HAVE_EEPROM_PAGED_ACCESS</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">If HAVE_EEPROM_PAGED_ACCESS is defined to 1, page mode access to EEPROM is compiled in.  <a href="#42a0af8a7294752a43cdc9b0304326a2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloaderconfig_8h.html#dab345602921c43ab5d17ba1c122a8b6">HAVE_EEPROM_BYTE_ACCESS</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">If HAVE_EEPROM_BYTE_ACCESS is defined to 1, byte mode access to EEPROM is compiled in.  <a href="#dab345602921c43ab5d17ba1c122a8b6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloaderconfig_8h.html#528544e8fffe53b468f872501c995e62">BOOTLOADER_CAN_EXIT</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">If this macro is defined to 1, the boot loader will exit shortly after the programmer closes the connection to the device.  <a href="#528544e8fffe53b468f872501c995e62"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloaderconfig_8h.html#acc10e1cdb7c84ed08f64a1391c6da15">SIGNATURE_BYTES</a>&nbsp;&nbsp;&nbsp;0x1e, 0x95, 0x02, 0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This macro defines the signature bytes returned by the emulated USBasp to the programmer software.  <a href="#acc10e1cdb7c84ed08f64a1391c6da15"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloaderconfig_8h.html#f99f67d2ed37bf4db9ff7bd6719591b6">ledcounter</a> = 0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">counter used to set the speed of the running light  <a href="#f99f67d2ed37bf4db9ff7bd6719591b6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bootloaderconfig_8h.html#cdf97a4f92cab2e4ca9e873831b88d4f">ledstate</a> = 0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">state of the running light  <a href="#cdf97a4f92cab2e4ca9e873831b88d4f"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This file (together with some settings in Makefile) configures the boot loader according to the hardware. 
<p>
This file contains (besides the hardware configuration normally found in usbconfig.h) two functions or macros: bootLoaderInit() and bootLoaderCondition(). Whether you implement them as macros or as static inline functions is up to you, decide based on code size and convenience.<p>
bootLoaderInit() is called as one of the first actions after reset. It should be a minimum initialization of the hardware so that the boot loader condition can be read. This will usually consist of activating a pull-up resistor for an external jumper which selects boot loader mode.<p>
bootLoaderCondition() is called immediately after initialization and in each main loop iteration. If it returns TRUE, the boot loader will be active. If it returns FALSE, the boot loader jumps to address 0 (the loaded application) immediately.<p>
For compatibility with Thomas Fischl's avrusbboot, we also support the macro names BOOTLOADER_INIT and BOOTLOADER_CONDITION for this functionality. If these macros are defined, the boot loader usees them.<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Ronald Schaten &lt;<a href="mailto:ronald@schatenseite.de">ronald@schatenseite.de</a>&gt; </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd></dd></dl>
<dl class="rcs" compact><dt><b>Id</b></dt><dd><a class="el" href="bootloaderconfig_8h.html" title="This file (together with some settings in Makefile) configures the boot loader according...">bootloaderconfig.h</a>,v 1.1 2008-07-09 20:47:11 rschaten Exp </dd></dl>
<p>
License: GNU GPL v2 (see License.txt) 
<p>Definition in file <a class="el" href="bootloaderconfig_8h-source.html">bootloaderconfig.h</a>.</p>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="528544e8fffe53b468f872501c995e62"></a><!-- doxytag: member="bootloaderconfig.h::BOOTLOADER_CAN_EXIT" ref="528544e8fffe53b468f872501c995e62" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BOOTLOADER_CAN_EXIT&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If this macro is defined to 1, the boot loader will exit shortly after the programmer closes the connection to the device. 
<p>
Costs ~36 bytes. 
<p>Definition at line <a class="el" href="bootloaderconfig_8h-source.html#l00091">91</a> of file <a class="el" href="bootloaderconfig_8h-source.html">bootloaderconfig.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="dab345602921c43ab5d17ba1c122a8b6"></a><!-- doxytag: member="bootloaderconfig.h::HAVE_EEPROM_BYTE_ACCESS" ref="dab345602921c43ab5d17ba1c122a8b6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HAVE_EEPROM_BYTE_ACCESS&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If HAVE_EEPROM_BYTE_ACCESS is defined to 1, byte mode access to EEPROM is compiled in. 
<p>
Byte mode is only used if the device (as identified by its signature) does not support page mode for EEPROM. It is required for accessing the EEPROM on the ATMega8. Costs ~54 bytes. 
<p>Definition at line <a class="el" href="bootloaderconfig_8h-source.html#l00087">87</a> of file <a class="el" href="bootloaderconfig_8h-source.html">bootloaderconfig.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="42a0af8a7294752a43cdc9b0304326a2"></a><!-- doxytag: member="bootloaderconfig.h::HAVE_EEPROM_PAGED_ACCESS" ref="42a0af8a7294752a43cdc9b0304326a2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HAVE_EEPROM_PAGED_ACCESS&nbsp;&nbsp;&nbsp;1          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If HAVE_EEPROM_PAGED_ACCESS is defined to 1, page mode access to EEPROM is compiled in. 
<p>
Whether page mode or byte mode access is used by AVRDUDE depends on the target device. Page mode is only used if the device supports it, e.g. for the ATMega88, 168 etc. You can save quite a bit of memory by disabling page mode EEPROM access. Costs ~ 138 bytes. 
<p>Definition at line <a class="el" href="bootloaderconfig_8h-source.html#l00081">81</a> of file <a class="el" href="bootloaderconfig_8h-source.html">bootloaderconfig.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="acc10e1cdb7c84ed08f64a1391c6da15"></a><!-- doxytag: member="bootloaderconfig.h::SIGNATURE_BYTES" ref="acc10e1cdb7c84ed08f64a1391c6da15" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SIGNATURE_BYTES&nbsp;&nbsp;&nbsp;0x1e, 0x95, 0x02, 0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This macro defines the signature bytes returned by the emulated USBasp to the programmer software. 
<p>
They should match the actual device at least in memory size and features. If you don't define this, values for ATMega8, ATMega88, ATMega168 and ATMega328 are guessed correctly. 
<p>Definition at line <a class="el" href="bootloaderconfig_8h-source.html#l00097">97</a> of file <a class="el" href="bootloaderconfig_8h-source.html">bootloaderconfig.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="9bf12dabd0e5186299ed0f13cd00dfeb"></a><!-- doxytag: member="bootloaderconfig.h::USB_CFG_CLOCK_KHZ" ref="9bf12dabd0e5186299ed0f13cd00dfeb" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USB_CFG_CLOCK_KHZ&nbsp;&nbsp;&nbsp;(F_CPU/1000)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Clock rate of the AVR in MHz. 
<p>
Legal values are 12000, 16000 or 16500. The 16.5 MHz version of the code requires no crystal, it tolerates +/- 1% deviation from the nominal frequency. All other rates require a precision of 2000 ppm and thus a crystal! Default if not specified: 12 MHz 
<p>Definition at line <a class="el" href="bootloaderconfig_8h-source.html#l00055">55</a> of file <a class="el" href="bootloaderconfig_8h-source.html">bootloaderconfig.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="3a8bf6679cd70d1ddcc05024ffef9922"></a><!-- doxytag: member="bootloaderconfig.h::USB_CFG_DMINUS_BIT" ref="3a8bf6679cd70d1ddcc05024ffef9922" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USB_CFG_DMINUS_BIT&nbsp;&nbsp;&nbsp;0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This is the bit number in USB_CFG_IOPORT where the USB D- line is connected. 
<p>
This may be any bit in the port. 
<p>Definition at line <a class="el" href="bootloaderconfig_8h-source.html#l00043">43</a> of file <a class="el" href="bootloaderconfig_8h-source.html">bootloaderconfig.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="3005cdbb03c707af8007363632d7d02d"></a><!-- doxytag: member="bootloaderconfig.h::USB_CFG_DPLUS_BIT" ref="3005cdbb03c707af8007363632d7d02d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USB_CFG_DPLUS_BIT&nbsp;&nbsp;&nbsp;2          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This is the bit number in USB_CFG_IOPORT where the USB D+ line is connected. 
<p>
This may be any bit in the port. Please note that D+ must also be connected to interrupt pin INT0! 
<p>Definition at line <a class="el" href="bootloaderconfig_8h-source.html#l00048">48</a> of file <a class="el" href="bootloaderconfig_8h-source.html">bootloaderconfig.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="98ed17962b55543b35e10ae1f8ebe09b"></a><!-- doxytag: member="bootloaderconfig.h::USB_CFG_IOPORTNAME" ref="98ed17962b55543b35e10ae1f8ebe09b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USB_CFG_IOPORTNAME&nbsp;&nbsp;&nbsp;D          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This is the port where the USB bus is connected. 
<p>
When you configure it to "B", the registers PORTB, PINB and DDRB will be used. 
<p>Definition at line <a class="el" href="bootloaderconfig_8h-source.html#l00039">39</a> of file <a class="el" href="bootloaderconfig_8h-source.html">bootloaderconfig.h</a>.</p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="f99f67d2ed37bf4db9ff7bd6719591b6"></a><!-- doxytag: member="bootloaderconfig.h::ledcounter" ref="f99f67d2ed37bf4db9ff7bd6719591b6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="bootloaderconfig_8h.html#f99f67d2ed37bf4db9ff7bd6719591b6">ledcounter</a> = 0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
counter used to set the speed of the running light 
<p>

<p>Definition at line <a class="el" href="bootloaderconfig_8h-source.html#l00118">118</a> of file <a class="el" href="bootloaderconfig_8h-source.html">bootloaderconfig.h</a>.</p>

</div>
</div><p>
<a class="anchor" name="cdf97a4f92cab2e4ca9e873831b88d4f"></a><!-- doxytag: member="bootloaderconfig.h::ledstate" ref="cdf97a4f92cab2e4ca9e873831b88d4f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="bootloaderconfig_8h.html#cdf97a4f92cab2e4ca9e873831b88d4f">ledstate</a> = 0          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
state of the running light 
<p>

<p>Definition at line <a class="el" href="bootloaderconfig_8h-source.html#l00119">119</a> of file <a class="el" href="bootloaderconfig_8h-source.html">bootloaderconfig.h</a>.</p>

</div>
</div><p>
<hr size="1"><address style="text-align: right;"><small>Generated on Sat Jul 12 22:27:15 2008 for Dulcimer by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.4 </small></address>
</body>
</html>
